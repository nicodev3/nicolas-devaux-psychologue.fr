---
import BaseHead from "../../components/BaseHead.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";
import { getCollection } from "astro:content";
import FormattedDate from "../../components/FormattedDate.astro";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<!doctype html>
<html lang="fr">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body class="bg-gradient-to-r from-blue-50 to-white">
    <Header />
    <main class="container py-8">
      <!-- Section Hero -->
      <div class="bg-white rounded-xl shadow-md p-8 mb-12 border border-gray-100">
        <h1 class="text-4xl md:text-5xl font-bold text-tertiary mb-4 leading-tight text-center">
          Articles de psychologie
        </h1>
        <p class="text-lg text-gray-700 text-center leading-relaxed max-w-3xl mx-auto">
          Découvrez mes articles sur la psychologie, les thérapies et le bien-être mental. 
          Des conseils pratiques et des éclairages professionnels pour mieux comprendre 
          l'accompagnement psychologique.
        </p>
      </div>

      <!-- Articles Grid -->
      <div class="grid md:grid-cols-2 xl:grid-cols-3 gap-8">
        {
          posts.map((post) => (
            <article class="bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden border border-gray-100 group">
              <a href={`/blog/${post.slug}/`} class="block">
                <div class="aspect-video overflow-hidden">
                  <img
                    width={720}
                    height={360}
                    src={post.data.heroImage}
                    alt={post.data.title}
                    class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                  />
                </div>
                <div class="p-6">
                  <h2 class="text-xl font-bold text-tertiary mb-3 group-hover:text-accent transition-colors duration-200 leading-tight">
                    {post.data.title}
                  </h2>
                  <p class="text-sm text-gray-500 font-medium">
                    <FormattedDate date={post.data.pubDate} />
                  </p>
                </div>
              </a>
            </article>
          ))
        }
      </div>
    </main>
    <Footer />
  </body>
</html>
